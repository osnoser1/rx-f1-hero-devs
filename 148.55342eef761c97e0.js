"use strict";(self.webpackChunkrx_f1_hero_devs=self.webpackChunkrx_f1_hero_devs||[]).push([[148],{9148:(U,h,s)=>{s.r(h),s.d(h,{default:()=>L});var q=s(5861),e=s(4650),i=s(6895),f=s(8176),R=s(4004),y=s(3151),T=s(3900),d=s(2867),P=s(7616),v=s(4549);class r{constructor(){this.http=(0,e.f3M)(d.O),this.path="results.json"}getAll(n){const{season:a,...l}=n??{},o=(0,P.V)(l);return this.http.get(`${a?`${a}/`:""}${this.path}`,{params:o}).pipe((0,v.Oi)("Race"))}}r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac});var Q=s(2546),C=s(4717);function $(t){const n=(0,C.J)(t);return n.season=n.season?Number(n.season):2018,n}function x(t){const n=(0,Q.Z)(t);return 2018===n.season&&delete n.season,(0,C.m)(n)}class c{constructor(){this.raceService=(0,e.f3M)(r),this.loading=(0,e.f3M)(d.b),this.route=(0,e.f3M)(f.gz),this.queryParams$=this.route.queryParams.pipe((0,R.U)($),(0,y.d)(1)),this.data$=this.queryParams$.pipe((0,T.w)(n=>this.raceService.getAll(n).pipe((0,v.sU)(this.loading))),(0,y.d)(1)),this.loading$=this.loading.isLoading$}}c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac});var Z=s(982),g=s(9549),F=s(4385),A=s(9024),M=s(3238);function N(t,n){if(1&t&&(e.TgZ(0,"mat-option",2),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}const O=function(){return[2018,2019,2020,2021,2022]};class p{constructor(){this.queryChange=new e.vpe}}p.\u0275fac=function(n){return new(n||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-filters"]],inputs:{query:"query"},outputs:{queryChange:"queryChange"},standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[["appSelectFilter","season",3,"value","queryChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,a){1&n&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Season"),e.qZA(),e.TgZ(3,"mat-select",0),e.NdJ("queryChange",function(o){return a.queryChange.emit(o)}),e.YNc(4,N,2,2,"mat-option",1),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("value",null==a.query?null:a.query.season),e.xp6(1),e.Q6J("ngForOf",e.DdM(2,O)))},dependencies:[i.ez,i.sg,g.lN,g.KE,g.hX,F.LD,F.gD,M.ey,A.f],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});const J=function(t,n){return{count:t,result:n}};function j(t,n){if(1&t){const a=e.EpF();e.ynx(0),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"app-table-preview",3),e.NdJ("queryChange",function(o){e.CHM(a);const u=e.oxw(2);return e.KtG(u.onQueryChange(o))}),e.ALo(4,"async"),e.qZA(),e._UZ(5,"br")(6,"hr")(7,"br"),e.BQk()}if(2&t){const a=n.$implicit,l=n.last,o=e.oxw().ngIf,u=e.oxw();e.xp6(2),e.AsE("",a.season," ",a.raceName,""),e.xp6(1),e.Q6J("columns",u.columns)("data",e.WLB(8,J,o.count,a.Results))("query",e.lcZ(4,6,u.facade.queryParams$))("showPagination",l)}}function z(t,n){if(1&t&&(e.ynx(0),e.YNc(1,j,8,11,"ng-container",2),e.BQk()),2&t){const a=n.ngIf;e.xp6(1),e.Q6J("ngForOf",a.result)}}function D(t,n){1&t&&e._UZ(0,"app-full-screen-loading-spinner")}class m{constructor(){this.facade=(0,e.f3M)(c),this.route=(0,e.f3M)(f.gz),this.router=(0,e.f3M)(f.F0),this.columns=[{name:"pos",title:"Pos",value:n=>n.position},{name:"no",title:"No",value:n=>n.number},{name:"driver",title:"Driver",value:({Driver:n})=>`${n.givenName} ${n.familyName}`},{name:"constructor",title:"Constructor",value:({Constructor:n})=>n.name},{name:"laps",title:"Laps",value:n=>n.laps},{name:"grid",title:"Grid",value:n=>n.grid},{name:"time",title:"Time",value:({Time:n})=>n?.time??""},{name:"status",title:"Status",value:n=>n.status},{name:"points",title:"Points",value:n=>n.points}]}onQueryChange(n){var a=this;return(0,q.Z)(function*(){return yield a.router.navigate([],{queryParams:x({...a.route.snapshot.queryParams,...n})})})()}}m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-races"]],standalone:!0,features:[e._Bn([c]),e.jDz],decls:8,vars:9,consts:[[3,"query","queryChange"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"columns","data","query","showPagination","queryChange"]],template:function(n,a){1&n&&(e.TgZ(0,"h1"),e._uU(1,"Races per season with final results"),e.qZA(),e.TgZ(2,"app-filters",0),e.NdJ("queryChange",function(o){return a.onQueryChange(o)}),e.ALo(3,"async"),e.qZA(),e.YNc(4,z,2,1,"ng-container",1),e.ALo(5,"async"),e.YNc(6,D,1,0,"app-full-screen-loading-spinner",1),e.ALo(7,"async")),2&n&&(e.xp6(2),e.Q6J("query",e.lcZ(3,3,a.facade.queryParams$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,5,a.facade.data$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,7,a.facade.loading$)))},dependencies:[i.ez,i.sg,i.O5,i.Ov,p,Z.m,Z.a],styles:["[_nghost-%COMP%]{display:block}.spinner[_ngcontent-%COMP%]{align-items:center;display:flex;height:100vh;justify-content:center;position:fixed;width:100%;top:0}"],changeDetection:0});const L=[{path:"",component:m,providers:[r]}]}}]);